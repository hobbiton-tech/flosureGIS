<nz-card [nzBordered]="false">
  <nz-tabset>
    <nz-tab nzTitle="Receipted">
      <nz-card [nzBordered]="false">
        <div style="margin-bottom: 10px;">
          <div nz-row [nzGutter]="24">
            <div nz-col nzSpan="12">
              <div style="width: 75%;">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                  <input
                    type="text"
                    nz-input
                    placeholder="Search by account id, account name, bank"
                    [(ngModel)]="searchString"
                    (ngModelChange)="searchR($event)"
                  />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </div>
            </div>
          </div>
        </div>

        <nz-table
          #receiptTable
          [nzData]="displayReceiptedList"
          [nzSize]="'small'"
          [nzBordered]="true"
          style="background-color: white;"
        >
          <thead>
          <tr>
            <th>Receipt Number</th>
            <th>Client Name</th>
            <th>Amount</th>
            <th>Receipt type</th>
            <th>Date Receipted</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr
            *ngFor="let receipt of receiptTable.data"
            class="table-row"
          >
            <td>{{ receipt.receipt_number }}</td>
            <td>{{ receipt.on_behalf_of }}</td>
            <td>
              {{ receipt.sum_in_digits | number: '1.2-2' }}
            </td>
            <td>{{ receipt.receipt_type }}</td>

            <td>
              {{ receipt.today_date | date }}
            </td>
            <td>
              <button
                nz-button
                nzType="default"
                nzSize="small"
                [nzLoading]="isConfirmLoading"
                (click)="generateID(receipt.ID)"
              >
                View
              </button>

              <button
                nz-button
                nzType="default"
                nzSize="small"
                [nzLoading]="isConfirmLoading"
                (click)="showCancelModal(receipt)"
                nzType="danger"
              >
                Cancel
              </button>

              <!-- <button
                      nz-popconfirm
                      nzPopconfirmTitle="Are you sure you want to cancel the receipt?"
                      nzPopconfirmPlacement="leftTop"
                      (nzOnConfirm)="onCancel(receipt)"
                      (nzOnCancel)="cancel()"
                      nz-button
                      nzType="danger"
                      nzSize="small"
                  >
                      Cancel
                  </button> -->
            </td>
          </tr>
          </tbody>
        </nz-table>
        <nz-modal
          [(nzVisible)]="isCancelVisible"
          nzTitle="Cancel Receipt"
          (nzOnCancel)="cancelCancellation()"
          (nzOnOk)="onCancel()"
        >
          <p><b>Are you sure you want to proceed?</b></p>
          <div nz-row nzGutter="0">
            <form
              nz-form
              [nzLayout]="'inline'"
              [formGroup]="cancelForm"
            >
              <nz-form-item>
                <nz-form-label
                  [nzSpan]="12"
                  nzRequired
                  nzFor="remarks"
                >Reason</nz-form-label
                >
                <nz-form-control [nzSpan]="12">
                                    <textarea
                                      formControlName="remarks"
                                      nz-input
                                      rows="2"
                                      cols="50"
                                      placeholder="write reason for cancelCancellation"
                                    ></textarea>
                </nz-form-control>
              </nz-form-item>
            </form>
          </div>
        </nz-modal>
      </nz-card>
    </nz-tab>

    <nz-tab nzTitle="Cancelled Receipts">
      <nz-card [nzBordered]="false">
        <div style="margin-bottom: 10px;">
          <div nz-row [nzGutter]="24">
            <div nz-col nzSpan="12">
              <div style="width: 75%;">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                  <input
                    type="text"
                    nz-input
                    placeholder="Search by account id, account name, bank"
                    [(ngModel)]="searchString"
                    (ngModelChange)="searchCR($event)"
                  />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </div>
            </div>
          </div>
        </div>

        <nz-table
          #cancelledReceiptTable
          [nzData]="displayCancelledReceiptList"
          [nzSize]="'small'"
          [nzBordered]="true"
          style="background-color: white;"
        >
          <thead>
          <tr>
            <th>Receipt Number</th>
            <th>Client Name</th>
            <th>Amount</th>
            <th>Receipt type</th>
            <th>Date Receipted</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr
            *ngFor="let receipt of cancelledReceiptTable.data"
            class="table-row"
          >
            <td>{{ receipt.receipt_number }}</td>
            <td>{{ receipt.on_behalf_of }}</td>
            <td>
              {{ receipt.sum_in_digits | number: '1.2-2' }}
            </td>
            <td>{{ receipt.receipt_type }}</td>

            <td>
              {{ receipt.today_date | date: 'yy/mm/dd' }}
            </td>
            <td>
              <button
                nz-button
                nzType="default"
                nzSize="small"
                [nzLoading]="isConfirmLoading"
                (click)="generateID(receipt.ID)"
              >
                View
              </button>

              <button
                nz-button
                nzType="default"
                nzSize="small"
                [nzLoading]="isConfirmLoading"
                (click)="showReinstateModal(receipt)"
                nzType="primary"
              >
                Reinstate
              </button>
            </td>
          </tr>
          </tbody>
        </nz-table>
        <nz-modal
          [(nzVisible)]="isReinstateVisible"
          nzTitle="Reinstate Receipt"
          (nzOnCancel)="cancelReinstate()"
          (nzOnOk)="onReinstate()"
        >
          <div nz-row nzGutter="0" style="margin-left: 20px;">
            <p>
              <b>
                Are you sure you want to proceed?
              </b>
            </p>
          </div>

          <div nz-row nzGutter="0">
            <form
              nz-form
              [nzLayout]="'inline'"
              [formGroup]="reinstateForm"
            >
              <nz-form-item>
                <nz-form-label
                  [nzSpan]="12"
                  nzRequired
                  nzFor="remarks"
                >Reason</nz-form-label
                >
                <nz-form-control [nzSpan]="12">
                                    <textarea
                                      formControlName="remarks"
                                      nz-input
                                      rows="2"
                                      cols="50"
                                      placeholder="write reason for reinstating the receipt"
                                    ></textarea>
                </nz-form-control>
              </nz-form-item>
            </form>
          </div>
        </nz-modal>
      </nz-card>
    </nz-tab>
  </nz-tabset>
</nz-card>
