<nz-collapse>
    <nz-collapse-panel nzHeader="Warranties and Exclusions">
        <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
                <nz-card nzTitle="Warranties">
                    <div style="margin-bottom: 10px;">
                        <div nz-row [nzGutter]="24">
                            <div nz-col nzSpan="12">
                                <div style="width: 75%;">
                                    <nz-input-group [nzSuffix]="
                                            suffixIconSearch
                                        ">
                                        <input type="text" nz-input
                                            placeholder="Search by Warranty ID, Warranty type" />
                                    </nz-input-group>
                                    <ng-template #suffixIconSearch>
                                        <i nz-icon nzType="search"></i>
                                    </ng-template>
                                </div>
                            </div>

                            <diV nz-col nzSpan="12">
                                <nz-select style="
                                        width: 200px;
                                    " nzShowSearch nzAllowClear nzPlaceHolder="Select a Warranty" nzMode="multiple"
                                    [(ngModel)]="
                                        selectedWarrantyValue
                                    " (ngModelChange)="selectWarranty()">
                                    <nz-option *ngFor="
                                            let o of warrantyList
                                        " [nzLabel]="
                                            o.heading
                                        " [nzValue]="o"></nz-option>
                                </nz-select>
                            </diV>
                        </div>
                    </div>
                    <nz-table #warrantyTable [nzData]="selectedWarrantyValue">
                        <thead>
                            <tr>
                                <th>Heading</th>
                                <th>Details</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="
                                    let warranty of warrantyTable.data
                                ">
                                <td>
                                    {{
                                        warranty.heading
                                    }}
                                </td>
                                <td>
                                    {{
                                        warranty.description
                                    }}
                                </td>
                                <td>
                                    <!-- <button
                                    nz-button
                                    nzType="primary"
                                    (click)="
                                        onSelectExclusion(
                                            wording
                                        )
                                    "
                                >
                                    Select
                                </button> -->
                                    <button nz-button nzType="default" (click)="
                                            onEditWarranty(
                                                warranty
                                            )
                                        ">
                                        Edit
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-card>
            </div>
            <div nz-col [nzSpan]="12">
                <nz-card nzTitle="Exclusions">
                    <div style="margin-bottom: 10px;">
                        <div nz-row [nzGutter]="24">
                            <div nz-col nzSpan="12">
                                <div style="width: 75%;">
                                    <nz-input-group [nzSuffix]="
                                            suffixIconSearch
                                        ">
                                        <input type="text" nz-input
                                            placeholder="Search by exclusion ID, exclusion type" />
                                    </nz-input-group>
                                    <ng-template #suffixIconSearch>
                                        <i nz-icon nzType="search"></i>
                                    </ng-template>
                                </div>
                            </div>
                            <diV nz-col nzSpan="12">
                                <nz-select style="
                                        width: 200px;
                                    " nzShowSearch nzAllowClear nzPlaceHolder="Select a Exclusion" nzMode="multiple"
                                    [(ngModel)]="
                                        selectedExclusionValue
                                    " (ngModelChange)="selectExclusion()">
                                    <nz-option *ngFor="
                                            let o of exclusionList
                                        " [nzLabel]="
                                            o.heading
                                        " [nzValue]="o"></nz-option>
                                </nz-select>
                            </diV>
                        </div>
                    </div>
                    <nz-table #exclusionTable [nzData]="
                        selectedExclusionValue
                        ">
                        <thead>
                            <tr>
                                <th>Heading</th>
                                <th>Details</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="
                                    let exclusion of exclusionTable.data
                                ">
                                <td>
                                    {{
                                        exclusion.heading
                                    }}
                                </td>
                                <td>
                                    {{
                                        exclusion.description
                                    }}
                                </td>
                                <td>
                                    <!-- <button
                                    nz-button
                                    nzType="primary"
                                    (click)="
                                        onSelectExtension(
                                            extension
                                        )
                                    "
                                >
                                    Select
                                </button> -->
                                    <button nz-button nzType="default" (click)="
                                            onEditExclusion(
                                                exclusion
                                            )
                                        ">
                                        Edit
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-card>
            </div>
        </div>
    </nz-collapse-panel>
</nz-collapse>

<nz-modal [(nzVisible)]="isWarrantyEditVisible" nzTitle="Edit Warranty" (nzOnCancel)="handleEditWarrantyCancel()"
    (nzOnOk)="handleEditWarrantyOk()">
    <form nz-form [formGroup]="warrantyForm">
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Heading</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="warrantyErrorTpl">
                <input nz-input formControlName="heading" />
                <ng-template #warrantyErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your warranty heading!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The heading is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Description</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="warrantyDeailsErrorTpl">
                <textarea formControlName="description" nz-input rows="5"></textarea>

                <ng-template #warrantyDeailsErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your warranty details!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The details are redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
    </form>
</nz-modal>

<nz-modal [(nzVisible)]="isExclusionEditVisible" nzTitle="Edit Exclusion" (nzOnCancel)="handleEditExclusionCancel()"
    (nzOnOk)="handleEditExclusionOk()">
    <form nz-form [formGroup]="exclusionForm">
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Heading</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="exclusionErrorTpl">
                <input nz-input formControlName="heading" />
                <ng-template #exclusionErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your exclusion heading!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The heading is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Description</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="exclusionDescriptionErrorTpl">
                <textarea formControlName="description" nz-input rows="5"></textarea>

                <ng-template #exclusionDescriptionErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your description!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The description is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
    </form>
</nz-modal>