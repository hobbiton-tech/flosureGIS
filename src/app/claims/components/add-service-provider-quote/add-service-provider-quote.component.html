<nz-modal [(nzVisible)]="isAddServiceProviderQuoteVisible" [nzTitle]="documentTitle" [nzFooter]="null"
    [nzContent]="serviceProviderQuoteContent" (nzOnCancel)="closeAddServiceProviderQuote()"
    (nzOnOk)="closeAddServiceProviderQuote()" nzWidth="50%">

    <ng-template #serviceProviderQuoteContent>
        <nz-spin nzSize="large" nzTip="Adding Quotation...." [nzSpinning]="isAddingServiceProvider">
            <nz-spin nzSize="large" nzTip="Uploading Document...." [nzSpinning]="isUploading">
                <form nz-form style="margin: 10px;" [formGroup]='serviceProviderQuoteForm'>
                    <div nz-row>
                        <div nz-col>
                            <nz-form-item>
                                <nz-form-label nzSpan="8" nzRequired>Service Provider</nz-form-label>
                                <nz-form-control nzSpan="15">
                                    <nz-select nzPlaceHolder="Select Service Provider"
                                        formControlName="serviceProvider">
                                        <nz-option *ngFor="let serviceProvider of displayServiceProvidersList"
                                            [nzValue]="serviceProvider" [nzLabel]="serviceProvider.name">
                                        </nz-option>
                                    </nz-select>
                                </nz-form-control>
                            </nz-form-item>
                            <nz-form-item>
                                <nz-form-label nzSpan="8" nzRequired>Total Cost</nz-form-label>
                                <nz-form-control nzSpan="15">
                                    <nz-input-group nzPrefix="{{currentClaim.policy.currency == 'ZMW' ? 'K' : '$'}}">
                                        <input nz-input formControlName="totalCost" />
                                    </nz-input-group>
                                </nz-form-control>
                            </nz-form-item>
                            <nz-form-item>
                                <nz-form-label nzSpan="8" nzRequired>Damage Description</nz-form-label>
                                <nz-form-control nzSpan="15">
                                    <textarea nz-input formControlName="repairesDescription"></textarea>
                                </nz-form-control>
                            </nz-form-item>
                            <nz-form-item>
                                <nz-form-label nzSpan="8" nzRequired>Quotation Upload</nz-form-label>
                                <nz-form-control nzSpan="15">

                                    <!-- <nz-upload nzType="drag" (nzChange)="onFileSelected($event)">
                                        <p class="ant-upload-drag-icon">
                                            <i nz-icon nzType="inbox"></i>
                                        </p>
                                        <p class="ant-upload-text">Click or drag file to this area to upload</p>
                                    </nz-upload> -->
                                    <nz-upload nzAction="https://www.mocky.io/v2/5cc8019d300000980a055e76"
                                        [nzHeaders]="{ authorization: 'authorization-text' }"
                                        (nzChange)="onFileSelected($event)">
                                        <button nz-button><i nz-icon nzType="upload"></i>Click to Upload</button>
                                    </nz-upload>

                                </nz-form-control>
                            </nz-form-item>
                        </div>
                    </div>

                    <nz-form-item>
                        <nz-form-control>
                            <div style="text-align: center; margin-top: 10px">

                                <button nz-button nzType="primary" style="margin-right: 8px" (click)="addQuote()"
                                    [disabled]="isUploading">Submit
                                    Quotation</button>
                                <button nz-button nzType="default" (click)="resetForm($event)"
                                    [disabled]="isUploading">Reset Form</button>
                            </div>
                        </nz-form-control>
                    </nz-form-item>

                </form>
            </nz-spin>
        </nz-spin>
    </ng-template>
</nz-modal>