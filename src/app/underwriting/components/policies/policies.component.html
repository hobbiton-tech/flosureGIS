<nz-spin nzSize="large" nzTip="Policies Loading...." [nzSpinning]="isOkLoading">
    <div style="margin: 10px;">
        <div style="margin-bottom: 20px; background: #fff;">
            <nz-page-header>
                <nz-page-header-title>Policies</nz-page-header-title>
                <nz-page-header-subtitle>List of all policies</nz-page-header-subtitle>
                <nz-page-header-extra>
                    <!-- <button nz-button>View Summary</button> -->
                </nz-page-header-extra>
                <nz-page-header-content>
                    <nz-descriptions [nzColumn]="3">
                        <nz-descriptions-item nzTitle="Total Policies" [nzSpan]="1">{{ policiesCount }}
                        </nz-descriptions-item>
                        <!-- <nz-descriptions-item nzTitle="Draft Policies" [nzSpan]="1">130</nz-descriptions-item>
          <nz-descriptions-item nzTitle="Confirmed Policies" [nzSpan]="1">101</nz-descriptions-item> -->
                    </nz-descriptions>
                </nz-page-header-content>
            </nz-page-header>
        </div>
        <nz-card>
            <div style="margin-bottom: 10px; width: 25%;">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" nz-input placeholder="Search by client, policy number, agent"
                        [(ngModel)]="searchString" (ngModelChange)="search($event)" />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>

            <nz-table #policiesTable [nzData]="displayPoliciesList" [nzSize]="'small'" [nzBordered]="true">
                <thead>
                    <tr>
                        <th>Policy Number</th>
                        <th>Cover From</th>
                        <th>Cover To</th>
                        <th>Client Name</th>
                        <th>Approved By</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let policy of policiesTable.data" (click)="viewPolicyDetails(policy)"
                        style="cursor: pointer;">
                        <td>{{ policy.policyNumber }}</td>
                        <td>{{ policy.startDate | date }}</td>
                        <td>{{ policy.endDate | date }}</td>
                        <td>{{ policy.client }}</td>
                        <td>{{ policy.user }}</td>
                        <td>{{ policy.status }}</td>
                    </tr>
                </tbody>
            </nz-table>
        </nz-card>
    </div>
</nz-spin>