<div style="margin: 25px;">
    <nz-card>
        <h4 nz-typography>Products</h4>
        <div style="margin-bottom: 10px;">
            <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="12">
                    <div style="width: 75%;">
                        <nz-input-group [nzSuffix]="suffixIconSearch">
                            <input type="text" nz-input placeholder="Search by clause Product Code" />
                        </nz-input-group>
                        <ng-template #suffixIconSearch>
                            <i nz-icon nzType="search"></i>
                        </ng-template>
                    </div>
                </div>
                <div nz-col nzSpan="12">
                    <div style="width: 35%;">
                        <nz-select [(ngModel)]="productClass" nzPlaceHolder="Select Product"
                            (ngModelChange)="onChange($event)" nzAllowClear>
                            <nz-option *ngFor="let o of classesList" [nzValue]="o" [nzLabel]="o.className">
                            </nz-option>
                        </nz-select>
                    </div>
                </div>
            </div>
        </div>

        <nz-table #productsTable [nzData]="productsList">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Product Code</th>
                    <th>Product Description</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let product of productsTable.data" (click)="onSelectProduct(product)"
                    style="cursor: pointer;">
                    <td>{{ product.productName }}</td>
                    <td>{{ product.productCode }}</td>
                    <td>{{ product.productDescription }}</td>
                </tr>
            </tbody>
        </nz-table>

        <nz-divider nzType="horizontal"></nz-divider>

        <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
                <nz-card nzTitle="Warranties">
                    <div style="margin-bottom: 10px;">
                        <div nz-row [nzGutter]="24">
                            <div nz-col nzSpan="12">
                                <div style="width: 75%;">
                                    <nz-input-group [nzSuffix]="suffixIconSearch">
                                        <input type="text" nz-input
                                            placeholder="Search by warranty ID, warranty type" />
                                    </nz-input-group>
                                    <ng-template #suffixIconSearch>
                                        <i nz-icon nzType="search"></i>
                                    </ng-template>
                                </div>
                            </div>
                            <div nz-col nzSpan="12">
                                <button nz-button nzType="primary" style="float: right;" (click)="openWarranty()">
                                    Add New Warranty
                                </button>
                            </div>
                        </div>
                    </div>
                    <nz-table #warrantiesTable [nzData]="warrantiesList">
                        <thead>
                            <tr>
                                <th>Heading</th>
                                <th>Description</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let warranty of warrantiesTable.data">
                                <td>{{ warranty.heading }}</td>
                                <td>{{ warranty.description }}</td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-card>
            </div>
            <div nz-col [nzSpan]="12">
                <nz-card nzTitle="Exclusions">
                    <div style="margin-bottom: 10px;">
                        <div nz-row [nzGutter]="24">
                            <div nz-col nzSpan="12">
                                <div style="width: 75%;">
                                    <nz-input-group [nzSuffix]="suffixIconSearch">
                                        <input type="text" nz-input
                                            placeholder="Search by exclusion ID, exclusion type" />
                                    </nz-input-group>
                                    <ng-template #suffixIconSearch>
                                        <i nz-icon nzType="search"></i>
                                    </ng-template>
                                </div>
                            </div>
                            <div nz-col nzSpan="12">
                                <button nz-button nzType="primary" style="float: right;" (click)="openExclusion()">
                                    Add New Exclusion
                                </button>
                            </div>
                        </div>
                    </div>
                    <nz-table #exclusionsTable [nzData]="exclusionsList">
                        <thead>
                            <tr>
                                <th>Heading</th>
                                <th>Description</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let exclusion of exclusionsTable.data">
                                <td>{{ exclusion.heading }}</td>
                                <td>{{ exclusion.description }}</td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-card>
            </div>
        </div>
    </nz-card>
</div>

<nz-drawer [nzClosable]="false" [nzVisible]="isWarrantyVisible" nzPlacement="left" nzTitle="Create Warranty"
    (nzOnClose)="closeWarranty()" [nzWidth]="600">
    <form nz-form [formGroup]="warrantyForm" (ngSubmit)="submitWarrantyForm()">
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Heading</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="warrantyHeadingErrorTpl">
                <input nz-input formControlName="heading" placeholder="Enter Heading" />
                <ng-template #warrantyHeadingErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your warranty heading!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The heading is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Description</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="warrantyDeailsErrorTpl">
                <textarea formControlName="description" nz-input rows="5" placeholder="Enter Description"></textarea>
                <ng-template #warrantyDeailsErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your description!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The description is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-control [nzOffset]="7" [nzSpan]="12">
                <button nz-button nzType="primary" [disabled]="!warrantyForm.valid">
                    Submit
                </button>
                <button nz-button (click)="resetWarrantyForm()">
                    Reset
                </button>
            </nz-form-control>
        </nz-form-item>
    </form>
</nz-drawer>

<nz-drawer [nzClosable]="false" [nzVisible]="isExclusionVisible" nzPlacement="left" nzTitle="Create Exclusion"
    (nzOnClose)="closeExclusion()" [nzWidth]="600">
    <form nz-form [formGroup]="exclusionForm" (ngSubmit)="submitExclusionForm()">
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Heading</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="exclusionHeadingErrorTpl">
                <input nz-input formControlName="heading" placeholder="Enter Heading" />
                <ng-template #exclusionHeadingErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your exclusion heading!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The heading is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label [nzSpan]="7" nzRequired>Description</nz-form-label>
            <nz-form-control [nzSpan]="12" nzHasFeedback nzValidatingTip="Validating..."
                [nzErrorTip]="exclusionDeailsErrorTpl">
                <textarea formControlName="description" nz-input rows="5" placeholder="Enter Description"></textarea>
                <ng-template #exclusionDeailsErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        Please input your description!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('duplicated')">
                        The description is redundant!
                    </ng-container>
                </ng-template>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-control [nzOffset]="7" [nzSpan]="12">
                <button nz-button nzType="primary" [disabled]="!exclusionForm.valid">
                    Submit
                </button>
                <button nz-button (click)="resetExclusionForm()">
                    Reset
                </button>
            </nz-form-control>
        </nz-form-item>
    </form>
</nz-drawer>